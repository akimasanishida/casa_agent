# CASAエージェント

## 概念

- NRAO CASA をコマンドライン上で操作する
- プロットなどの画像も Input することで、より Interactive な操作が可能
  - ただし、GUI 操作はコストが高いため実装しない
- MVP版では、コマンドラインにてプロンプトを入力
- 作成したスクリプトやプロットは保存する。出力結果やAI Agent の応答過程も保存する
- 仮想環境化して実行することで、ホストを保護

## エージェント

**CASAエージェント**

- プロンプトを基に、タスクを実行
- ツール：
    - スクリプト作成
    - スクリプト修正
    - スクリプト実行
    - コマンド操作
    - CASAドキュメントサーチ
    - ナレッジストア（TODO）：タスクの実行中に、別の機会においても役に立ちそうと判断した内容を記録
- `class CasaAgent` で実装
    - ユーザとインタラクティブに対話
    - 一つのタスクに対して、エージェントを繰り返し呼び出すことで複雑なタスクを実行
    - エージェントはインスタンスが破棄されるまで、全てのやり取りやタスクの取り組みを保持

## 仮想化

- `podman` を使用
- Working directory を RW 権限でマウント（`/working`）
- CASA などのソフトウェアやその他ユーザが指定したファイル・ディレクトリを R 権限でマウント（ホストと同じディレクトリを指定）
- ソフトウェア起動時にコンテナを名前を付けて作成、起動
- コマンド操作は、起動したコンテナで実行
- ソフトウェア終了時に、コンテナを停止、削除

